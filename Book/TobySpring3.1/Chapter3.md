# 3장 템플릿

확장에는 자유롭게 열려 있고 변경에는 굳게 닫혀있는다는 개방 폐쇄 원칙(OCP)은 코드에서 어떤 부분은 변경을 통해 그 기능이 다양해지고 확장하려는 성질이 있고, 어떤 부분은 고정되어 있고 변하지 않으려는 설정이 있음을 말해준다.
템플릿이란 이렇게 바뀌는 성질이 다른 코드 중에서 변경이 거의 일어나지 않으며 일정한 패턴으로 유지되는 특성을 가진 부분을 자유롭게 변경되는 성질을 가진 부분으로부터 독립시켜서 효과적으로 활용할 수 있도록 하는 방법이다.

-----

## 3.1 DB 커넥션 예외처리

DB 커넥션이라는 제한적인 리소스를 공유해 사용하는 서버에서 동작하는 JDBC 코드에는 반드시 지켜야할 원칙이 있으며, 바로 예외처리이다. 정상적인 JDBC 코드의 흐름을 따르지 않고 중간에 예외가 발생했을 경우에도 사용한 리소스를 반드시 반환해주어야 한다.

일반적으로 서버에서는 제한된 개수의 DB 커넥션을 만들어서 재사용 가능한 풀로 관리한다. getConnection ()으로 가져간 커넥션을 명시적으로 close()해서 돌려줘야만 다시 풀에 넣었다가 다음 커넥션 요청이 있을 때 재사용할 수 있다. 이런 식으로 오류가 날 때마다 미처 반환되지 못한 Connection이 계속 쌓이면 어느 순간에 커넥션 풀에 여유가 없으지고 리소스가 모자란다는 심각한 오류를 내며 서버가 중단될 수 있다.

이런 JDBC 코드에서는 어떤 상황에서도 가져온 리소스를 반환하도록 try/catch/finally 구문 사용을 권장한다.

-----

## 3.2 변하는 것과 변하지 않는 것

